% q4.m
original = imread('../questions/RISDance.jpg'); % RISDance.jpg is 2160px x 3840px

filter_range = 3:2:15;
scale_range = 10:10:240;
iterations = 100;

[X, Y] = meshgrid(filter_range, scale_range);
Z = zeros(size(X));

outer = 1;
for i = filter_range
    filter = ones(i, i);

    inner = 1;
    for scale = scale_range
        fprintf("i: %d\tscale: %d\n", i, scale);
        width = 16 * scale;
        height = 9 * scale;
        resized = imresize(original, [height width]);

        lapse_sum = 0;
        for count = 1:iterations
            tic;
            filtered = imfilter(resized, filter);
            lapse_sum = lapse_sum + toc;
        end

        Z(inner, outer) = lapse_sum / iterations;

        inner = inner + 1;
    end

    outer = outer + 1;
end

surf(X, Y, Z);
% disp(Z);
%     > filter size
%     0.0008    0.0003    0.0004    0.0005    0.0006    0.0009    0.0011
%     0.0003    0.0005    0.0009    0.0009    0.0011    0.0015    0.0017
%     0.0006    0.0007    0.0011    0.0012    0.0015    0.0020    0.0024
%     0.0007    0.0009    0.0013    0.0017    0.0023    0.0028    0.0034
%     0.0012    0.0014    0.0020    0.0026    0.0035    0.0043    0.0052
%     0.0014    0.0016    0.0025    0.0032    0.0057    0.0054    0.0068
%     0.0019    0.0021    0.0031    0.0041    0.0054    0.0070    0.0084
%     0.0026    0.0025    0.0039    0.0050    0.0065    0.0087    0.0105
%     0.0029    0.0033    0.0046    0.0069    0.0086    0.0116    0.0143
%     0.0039    0.0045    0.0059    0.0081    0.0108    0.0139    0.0168
%     0.0050    0.0053    0.0073    0.0100    0.0131    0.0166    0.0203
%     0.0058    0.0060    0.0089    0.0119    0.0167    0.0207    0.0251
%     0.0070    0.0068    0.0106    0.0131    0.0183    0.0227    0.0278
%     0.0083    0.0078    0.0113    0.0150    0.0207    0.0255    0.0322
%     0.0093    0.0092    0.0121    0.0168    0.0233    0.0276    0.0363
%     0.0107    0.0112    0.0152    0.0183    0.0257    0.0317    0.0405
%     0.0121    0.0135    0.0173    0.0230    0.0313    0.0388    0.0473
%     0.0134    0.0151    0.0220    0.0253    0.0339    0.0436    0.0538
%     0.0173    0.0173    0.0212    0.0295    0.0381    0.0474    0.0602
%     0.0182    0.0196    0.0234    0.0327    0.0414    0.0511    0.0647
%     0.0209    0.0219    0.0272    0.0341    0.0459    0.0549    0.0701
%     0.0217    0.0246    0.0309    0.0403    0.0521    0.0609    0.0798
%     0.0236    0.0266    0.0335    0.0460    0.0568    0.0697    0.0894
%     0.0272    0.0304    0.0399    0.0527    0.0683    0.0799    0.1039
